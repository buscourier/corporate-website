<div class="pb-10 px-4 max-w-[1170px] mx-auto">
  <a [routerLink]="['/account']" class="mt-16 mb-6 flex items-center hover:opacity-70">
    <tui-svg
      src="icons::account-back"
      class="!w-[32px] !h-[32px] mr-3"
    ></tui-svg>
    <span class="text-sm">Назад к личному кабинету</span>
  </a>
  <h1 class="mb-8 text-2xl lg:text-3xl font-heading font-bold">Мои заказы</h1>
  <app-filter (filterChanged)="fetchDataWithFilterParams($event)"></app-filter>
  <ng-container *appLet="(orders$ | async) as orders">
    <div *ngIf="isLargeScreen; else mobileData" class="mb-7 flex flex-col">
      <div class="overflow-x-auto">
        <div class="inline-block min-w-full align-middle">
          <div class="overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5">
            <tui-loader
              [showLoader]="isLoading$ | async"
            >
              <table
                *ngIf="orders"
                tuiTable
                [columns]="columns"
                class="w-full"
              >
                <thead>
                <tr tuiThGroup>
                  <th
                    *tuiHead="'order_id'"
                    tuiTh
                    [sorter]="null"
                    [sticky]="true"
                  >
                    № Заказа
                  </th>
                  <th
                    *tuiHead="'date'"
                    tuiTh
                    [sticky]="true"
                  >
                    Дата заказа
                  </th>
                  <th
                    *tuiHead="'sender_name'"
                    tuiTh
                    [sorter]="null"
                    [sticky]="true"
                  >
                    Отправитель
                  </th>
                  <th
                    *tuiHead="'recipient_name'"
                    tuiTh
                    [sticky]="true"
                  >
                    Получатель
                  </th>
                  <th
                    *tuiHead="'start_city'"
                    tuiTh
                    [sticky]="true"
                  >
                    Город отправления
                  </th>
                  <th
                    *tuiHead="'end_city'"
                    tuiTh
                    [sticky]="true"
                  >
                    Город получения
                  </th>
                  <th
                    *tuiHead="'order_price'"
                    tuiTh
                    [sticky]="true"
                  >
                    Цена
                  </th>
                </tr>
                </thead>
                <tbody
                  tuiTbody
                  [data]="orders"
                >
                <tr
                  *tuiRow="let order of orders"
                  tuiTr
                >
                  <td
                    *tuiCell="'order_id'"
                    tuiTd
                  >
                    <b (click)="showDetails(order.order_id)">{{order.order_id}}</b>
                  </td>
                  <td
                    *tuiCell="'date'"
                    tuiTd
                  >
                    {{order.date}}
                  </td>
                  <td
                    *tuiCell="'sender_name'"
                    tuiTd
                  >
                    {{order.sender_name}}
                  </td>
                  <td
                    *tuiCell="'recipient_name'"
                    tuiTd
                  >
                    {{order.recipient_name}}
                  </td>
                  <td
                    *tuiCell="'start_city'"
                    tuiTd
                  >
                    {{order.start_city}}
                  </td>
                  <td
                    *tuiCell="'end_city'"
                    tuiTd
                  >
                    {{order.end_city}}
                  </td>
                  <td
                    *tuiCell="'order_price'"
                    tuiTd
                  >
                    {{order.order_price}} {{'RUB' | tuiCurrency}}
                  </td>
                </tr>
                </tbody>
              </table>
            </tui-loader>
          </div>
        </div>
      </div>
    </div>
   <ng-template #mobileData>
     <tui-loader
       [showLoader]="isLoading$ | async"
     >
       <div *ngFor="let order of orders" class="mx-4 mb-7 pb-7 border-b border-gray-300">
         <app-mobile-data key="Заказ" [value]="getIdValue(order.order_id)" (click)='showDetails(order.order_id)'></app-mobile-data>
         <app-mobile-data key="Дата заказа" [value]="order.date"></app-mobile-data>
         <app-mobile-data key="Отправитель" [value]="order.sender_name"></app-mobile-data>
         <app-mobile-data key="Получатель" [value]="order.recipient_name"></app-mobile-data>
         <app-mobile-data key="Город отправления" [value]="order.start_city"></app-mobile-data>
         <app-mobile-data key="Город получения" [value]="order.end_city"></app-mobile-data>
         <app-mobile-data key="Цена" [value]="order.order_price"></app-mobile-data>
       </div>
     </tui-loader>
   </ng-template>
    <tui-pagination
      *ngIf="orders"
      [length]="length"
      [index]="pageIndex"
      (indexChange)="goToPage($event)"
    ></tui-pagination>
    <ng-container *tuiLet="(isLoading$ | async) as isLoading ">
      <p *ngIf="!isLoading && !orders" class="text-xl text-gray-500 text-center">По указанным параметрам нет данных</p>
    </ng-container>
  </ng-container>
</div>
