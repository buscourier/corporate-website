<ng-container *tuiLet="xs$ | async as xs">
  <ng-container *tuiLet="sm$ | async as sm">
    <ng-container *tuiLet="md$ | async as md">
      <ng-container *tuiLet="lg$ | async as lg">
        <!--main-->
        <div
          class="main-layout"
          [class.-translate-x-full]="xs && detailsOpened"
          [class.!overflow-visible]="xs && detailsOpened"
        >
          <!--    tabs-->
          <div *ngIf="xs || sm" class="mb-6 flex">
            <button
              type="button"
              class="flex-grow border-b-2 p-5 text-center text-sm hover:opacity-80"
              [class]="
                activeTabIndex === 0
                  ? 'border-yellow text-black'
                  : 'border-gray-300 text-gray-700'
              "
              (click)="setActiveTabIndex(0)"
            >
              <span>На карте</span>
            </button>
            <button
              type="button"
              class="flex-grow border-b-2 p-5 text-center text-sm hover:opacity-80"
              [class]="
                activeTabIndex === 1
                  ? 'border-yellow text-black'
                  : 'border-gray-300 text-gray-700'
              "
              (click)="setActiveTabIndex(1)"
            >
              <span>Списком</span>
            </button>
          </div>
          <!--  filter-->
          <div
            class="mb-5 flex gap-[3px] md:col-start-1 md:col-end-2 md:row-start-1 md:row-end-2 md:mb-0"
          >
            <button
              type="button"
              appearance="outline"
              class="min-w-14 flex flex-grow flex-col items-center rounded-sm border border-gray-400 bg-white px-3.5 pt-2.5 pb-3"
            >
              <tui-svg
                src="icons::location"
                class="!h-[18px] !w-[15px]"
                class="mb-0.5 text-black"
              ></tui-svg>
              <span class="text-4xs font-normal text-black sm:text-3xs"
                >Все адреса</span
              >
            </button>
            <button
              type="button"
              appearance="outline"
              class="min-w-14 flex flex-grow flex-col items-center rounded-sm border border-gray-400 bg-white px-3.5 pt-2.5 pb-3"
            >
              <tui-svg
                src="icons::give"
                class="!h-[18px] !w-[15px]"
                class="mb-0.5 text-black"
              ></tui-svg>
              <span class="text-4xs font-normal text-black sm:text-3xs"
                >Прием грузов</span
              >
            </button>
            <button
              type="button"
              appearance="outline"
              class="min-w-14 flex flex-grow flex-col items-center rounded-sm border border-gray-400 bg-white px-3.5 pt-2.5 pb-3"
            >
              <tui-svg
                src="icons::get"
                class="!h-[18px] !w-[15px]"
                class="mb-0.5 text-black"
              ></tui-svg>
              <span class="text-4xs font-normal text-black sm:text-3xs"
                >Выдача грузов</span
              >
            </button>
            <button
              type="button"
              appearance="outline"
              class="min-w-14 flex flex-grow flex-col items-center rounded-sm border border-gray-400 bg-white px-3.5 pt-2.5 pb-3"
            >
              <tui-svg
                src="icons::office"
                class="!h-[18px] !w-[15px]"
                class="mb-0.5 text-black"
              ></tui-svg>
              <span class="text-4xs font-normal text-black sm:text-3xs"
                >Офис</span
              >
            </button>
          </div>
          <!--  select-->
          <div
            class="mb-7 md:col-start-1 md:col-end-2 md:row-start-2 md:row-end-3 md:mb-0"
          >
            <tui-select
              tuiTextfieldSize="m"
              [formControl]="city"
              [tuiTextfieldLabelOutside]="true"
            >
              <tui-data-list-wrapper
                *tuiDataList
                [items]="[]"
              ></tui-data-list-wrapper>
            </tui-select>
          </div>
          <div
            *ngIf="((xs || sm) && activeTabIndex === 0) || !(xs || sm)"
            class="relative h-96 md:absolute md:inset-0 md:-z-10 md:h-full"
          >
            <app-map [latitude]="0" [longitude]="0" [points]="[]"></app-map>
          </div>
          <div
            *ngIf="((xs || sm) && activeTabIndex === 1) || !(xs || sm)"
            class="rounded-sm bg-white md:col-start-1 md:col-end-2 md:row-start-3 md:row-end-4 md:p-5 md:pr-2 md:shadow-md"
          >
            <tui-loader [showLoader]="false" class="h-full">
              <tui-scrollbar class="h-full">
                <div class="pr-3">
                  <div
                    class="mb-3.5 grid grid-cols-[1fr_repeat(3,auto)] grid-rows-[repeat(2,auto)] items-center gap-1.5"
                  >
                    <span
                      class="relative col-start-1 col-end-2 row-start-1 row-end-2 justify-self-start text-sm text-blue before:absolute before:bottom-0 before:left-0 before:w-full before:border-b before:border-dashed before:border-blue hover:cursor-pointer"
                      >Арсеньев</span
                    >
                    <p class="col-span-4 col-start-1 row-start-2 row-end-3">
                      ул. Фрунзе 45/1, первый этаж
                    </p>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::get"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-2 col-end-3 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::give"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-3 col-end-4 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::office"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-4 col-end-5 row-start-1 row-end-2"
                    ></button>
                  </div>
                  <div
                    class="mb-3.5 grid grid-cols-[1fr_repeat(3,auto)] grid-rows-[repeat(2,auto)] items-center gap-1.5"
                  >
                    <span
                      class="relative col-start-1 col-end-2 row-start-1 row-end-2 justify-self-start text-sm text-blue before:absolute before:bottom-0 before:left-0 before:w-full before:border-b before:border-dashed before:border-blue hover:cursor-pointer"
                      (click)="showDetails({}, details)"
                      >Арсеньев</span
                    >
                    <p class="col-span-4 col-start-1 row-start-2 row-end-3">
                      ул. Фрунзе 45/1, первый этаж
                    </p>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::get"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-2 col-end-3 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::give"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-3 col-end-4 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::office"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-4 col-end-5 row-start-1 row-end-2"
                    ></button>
                  </div>
                  <div
                    class="mb-3.5 grid grid-cols-[1fr_repeat(3,auto)] grid-rows-[repeat(2,auto)] items-center gap-1.5"
                  >
                    <span
                      class="relative col-start-1 col-end-2 row-start-1 row-end-2 justify-self-start text-sm text-blue before:absolute before:bottom-0 before:left-0 before:w-full before:border-b before:border-dashed before:border-blue hover:cursor-pointer"
                      >Арсеньев</span
                    >
                    <p class="col-span-4 col-start-1 row-start-2 row-end-3">
                      ул. Фрунзе 45/1, первый этаж
                    </p>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::get"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-2 col-end-3 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::give"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-3 col-end-4 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::office"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-4 col-end-5 row-start-1 row-end-2"
                    ></button>
                  </div>
                  <div
                    class="mb-3.5 grid grid-cols-[1fr_repeat(3,auto)] grid-rows-[repeat(2,auto)] items-center gap-1.5"
                  >
                    <span
                      class="relative col-start-1 col-end-2 row-start-1 row-end-2 justify-self-start text-sm text-blue before:absolute before:bottom-0 before:left-0 before:w-full before:border-b before:border-dashed before:border-blue hover:cursor-pointer"
                      >Арсеньев</span
                    >
                    <p class="col-span-4 col-start-1 row-start-2 row-end-3">
                      ул. Фрунзе 45/1, первый этаж
                    </p>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::get"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-2 col-end-3 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::give"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-3 col-end-4 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::office"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-4 col-end-5 row-start-1 row-end-2"
                    ></button>
                  </div>
                  <div
                    class="mb-3.5 grid grid-cols-[1fr_repeat(3,auto)] grid-rows-[repeat(2,auto)] items-center gap-1.5"
                  >
                    <span
                      class="relative col-start-1 col-end-2 row-start-1 row-end-2 justify-self-start text-sm text-blue before:absolute before:bottom-0 before:left-0 before:w-full before:border-b before:border-dashed before:border-blue hover:cursor-pointer"
                      >Арсеньев</span
                    >
                    <p class="col-span-4 col-start-1 row-start-2 row-end-3">
                      ул. Фрунзе 45/1, первый этаж
                    </p>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::get"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-2 col-end-3 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::give"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-3 col-end-4 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::office"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-4 col-end-5 row-start-1 row-end-2"
                    ></button>
                  </div>
                  <div
                    class="mb-3.5 grid grid-cols-[1fr_repeat(3,auto)] grid-rows-[repeat(2,auto)] items-center gap-1.5"
                  >
                    <span
                      class="relative col-start-1 col-end-2 row-start-1 row-end-2 justify-self-start text-sm text-blue before:absolute before:bottom-0 before:left-0 before:w-full before:border-b before:border-dashed before:border-blue hover:cursor-pointer"
                      >Арсеньев</span
                    >
                    <p class="col-span-4 col-start-1 row-start-2 row-end-3">
                      ул. Фрунзе 45/1, первый этаж
                    </p>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::get"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-2 col-end-3 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::give"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-3 col-end-4 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::office"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-4 col-end-5 row-start-1 row-end-2"
                    ></button>
                  </div>
                  <div
                    class="mb-3.5 grid grid-cols-[1fr_repeat(3,auto)] grid-rows-[repeat(2,auto)] items-center gap-1.5"
                  >
                    <span
                      class="relative col-start-1 col-end-2 row-start-1 row-end-2 justify-self-start text-sm text-blue before:absolute before:bottom-0 before:left-0 before:w-full before:border-b before:border-dashed before:border-blue hover:cursor-pointer"
                      >Арсеньев</span
                    >
                    <p class="col-span-4 col-start-1 row-start-2 row-end-3">
                      ул. Фрунзе 45/1, первый этаж
                    </p>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::get"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-2 col-end-3 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::give"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-3 col-end-4 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::office"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-4 col-end-5 row-start-1 row-end-2"
                    ></button>
                  </div>
                  <div
                    class="mb-3.5 grid grid-cols-[1fr_repeat(3,auto)] grid-rows-[repeat(2,auto)] items-center gap-1.5"
                  >
                    <span
                      class="relative col-start-1 col-end-2 row-start-1 row-end-2 justify-self-start text-sm text-blue before:absolute before:bottom-0 before:left-0 before:w-full before:border-b before:border-dashed before:border-blue hover:cursor-pointer"
                      >Арсеньев</span
                    >
                    <p class="col-span-4 col-start-1 row-start-2 row-end-3">
                      ул. Фрунзе 45/1, первый этаж
                    </p>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::get"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-2 col-end-3 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::give"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-3 col-end-4 row-start-1 row-end-2"
                    ></button>
                    <button
                      tuiIconButton
                      type="button"
                      appearance="icon"
                      icon="icons::office"
                      tuiHint="Hello"
                      tuiHintAppearance="onDark"
                      size="xs"
                      class="col-start-4 col-end-5 row-start-1 row-end-2"
                    ></button>
                  </div>
                </div>
              </tui-scrollbar>
            </tui-loader>
          </div>
          <div
            *ngIf="!md"
            class="mt-9 mb-14 grid grid-cols-1 gap-2.5 rounded-sm bg-yellow pt-4 pr-7 pb-6 pl-5 shadow-xl transition-all lg:col-span-3 lg:col-start-3 lg:row-start-1 lg:row-end-3 lg:mt-0 lg:mb-0"
          >
            <p>
              Единая справочная
              <span class="lg:hidden xl:inline-block"
                >для всего Приморского края</span
              >:
            </p>
            <a href="tel:+7(423) 205-86-27">
              <tui-svg
                src="icons::headphone"
                class="mr-2.5 !h-[16px] !w-[19px]"
              ></tui-svg>
              <span class="text-sm font-medium">+7 (423) 205-86-27</span>
            </a>
            <a href="mailto:inbox@busbox.guru">
              <tui-svg
                src="icons::email"
                class="mr-2.5 !h-[16px] !w-[19px]"
              ></tui-svg>
              <span
                class="border-b border-dashed border-black text-sm font-medium"
                >inbox@busbox.guru</span
              >
            </a>
          </div>
          <div
            *ngIf="xs || sm || (lg && detailsOpened)"
            class="col-start-2 col-end-3 row-start-1 row-end-6 rounded-sm bg-white lg:col-span-4 lg:col-start-2 lg:row-start-3 lg:row-end-3 xl:col-span-3"
            [class.absolute]="xs && detailsOpened"
          >
            <tui-loader [showLoader]="false" class="lg:h-full">
              <ng-container *ngTemplateOutlet="details"></ng-container>
            </tui-loader>
          </div>
        </div>
        <ng-template #details let-observer>
          <div
            class="relative h-full lg:p-6 lg:pt-8 xl:pt-10 xl:pr-5 xl:pb-16 xl:pl-12"
          >
            <button
              *ngIf="xs; else close"
              tuiButton
              type="button"
              class="mb-8 w-full"
              (click)="closeDetails()"
            >
              Назад
            </button>
            <ng-template #close>
              <button
                tuiIconButton
                type="button"
                appearance="icon"
                icon="icons::close-2"
                class="!absolute -top-6 -right-6 lg:top-0 lg:right-0"
                (click)="closeDetails(observer)"
              ></button>
            </ng-template>
            <b class="mb-8 block text-xl">Владивосток, Автовокзал</b>
            <tui-scrollbar class="h-full">
              <div
                class="grid gap-y-8 sm:grid-cols-2 sm:gap-y-0 sm:gap-x-4 xl:gap-x-11 xl:pr-5"
              >
                <div>
                  <div class="mb-8 grid grid-cols-[auto_1fr] text-sm">
                    <tui-svg
                      src="icons::point"
                      class="col-start-1 row-start-2 row-end-3 mr-3 text-gray-500"
                    ></tui-svg>
                    <p class="col-start-2 col-end-3 row-start-1 row-end-2">
                      ул. Фрунзе 45/1, первый этаж
                    </p>
                    <span
                      class="relative col-start-2 col-end-3 row-start-2 row-end-3 justify-self-start text-gray-700 before:absolute before:left-0 before:bottom-0 before:w-full before:border-b before:border-dashed before:border-gray-700"
                      >Посмотреть на карте</span
                    >
                  </div>
                  <div class="mb-8 grid grid-cols-[auto_1fr] text-sm">
                    <tui-svg
                      src="icons::alarm"
                      class="col-start-1 row-start-2 row-end-3 mr-3 text-gray-500"
                    ></tui-svg>
                    <p
                      class="col-start-2 col-end-3 row-start-1 row-end-2 text-gray-500"
                    >
                      График работы:
                    </p>
                    <span
                      class="relative col-start-2 col-end-3 row-start-2 row-end-3"
                      >с 8:00 до 20:00, без выходных</span
                    >
                  </div>
                  <div class="mb-8 grid grid-cols-[auto_1fr] text-sm">
                    <tui-svg
                      src="icons::union"
                      class="col-start-1 row-start-2 row-end-3 mr-3 text-gray-500"
                    ></tui-svg>
                    <p class="col-start-2 col-end-3 row-start-1 row-end-2">
                      Контакты для связи:
                    </p>
                    <b
                      class="relative col-start-2 col-end-3 row-start-2 row-end-3 font-medium"
                      >+7 (423) 293 78 79, доб. 0</b
                    >
                  </div>
                  <div class="grid grid-cols-[auto_1fr] text-sm">
                    <tui-svg
                      src="icons::email"
                      class="col-start-1 row-start-2 row-end-3 mr-3 text-blue"
                    ></tui-svg>
                    <p class="col-start-2 col-end-3 row-start-1 row-end-2">
                      Почта отделения:
                    </p>
                    <a
                      href="mailto:inbox@busbox.guru"
                      class="relative col-start-2 col-end-3 row-start-2 row-end-3 justify-self-start font-medium text-blue"
                      >inbox@busbox.guru</a
                    >
                  </div>
                </div>
                <div>
                  <div class="mb-6 max-w-sm">
                    <app-img
                      class="w-full"
                      src="/assets/images/index/images-box/img-2"
                    ></app-img>
                  </div>
                  <p class="text-xs">
                    За содержимое грузов и документов (далее — отправление)
                    несет ответственность лицо, являющееся Отправителем.
                  </p>
                </div>
              </div>
            </tui-scrollbar>
            <button
              *ngIf="xs"
              tuiButton
              type="button"
              class="mt-5 w-full"
              (click)="closeDetails()"
            >
              Назад
            </button>
          </div>
        </ng-template>
      </ng-container>
    </ng-container>
  </ng-container>
</ng-container>
